<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Payment Cancelled - Rell's Kitchen</title>
    
    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
    <link rel="manifest" href="/site.webmanifest">
    <link rel="shortcut icon" href="/favicon.ico">
    
    <link rel="stylesheet" href="/css/styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700;900&family=Montserrat:wght@300;400;600&display=swap" rel="stylesheet">
</head>
<body>
    <div class="cyber-grid"></div>
    
    <nav class="navbar">
        <div class="nav-container">
            <div class="nav-brand">
                <h1 class="brand-title">RELL'S <span class="usvi-accent">KITCHEN</span></h1>
                <p class="brand-subtitle">Caribbean ‚Ä¢ Cyberpunk ‚Ä¢ Fusion</p>
            </div>
            <div class="nav-links">
                <a href="/" class="nav-link">‚Üê Back to Menu</a>
            </div>
        </div>
    </nav>

    <section class="menu-section">
        <video class="menu-background-video" autoplay muted>
            <source src="/images/palm-trees-and-futuristic-neon-lit-cabanas-glow-on-a-tropical-beach_preview.mp4" type="video/mp4">
        </video>
        <div class="container">
            <h2 class="section-title">Payment <span class="usvi-accent">Cancelled</span></h2>
            <div class="menu-grid">
                <div class="product-card">
                    <div class="product-header">
                        <h3 class="product-name">ORDER CANCELLED</h3>
                    </div>
                    <div class="card-content" style="padding: 25px; text-align: center;">
                        <div style="font-size: 3em; margin-bottom: 20px; color: var(--warning-amber);">‚ö†Ô∏è</div>
                        <h3 style="color: var(--warning-amber); margin-bottom: 20px;">Payment Cancelled</h3>
                        
                        <div class="form-row">
                            <div class="input-group full-width">
                                <textarea readonly style="height: 80px; color: var(--text-light);">Your PayPal payment was cancelled and no charges were made to your account. Your cart items are still available if you'd like to try again.

You can return to the payment page to complete your order or continue browsing our menu.</textarea>
                                <label>Information</label>
                            </div>
                        </div>
                        
                        <div class="form-row">
                            <div class="input-group">
                                <input type="text" value="(501) 760-9490" readonly>
                                <label>Need Help? Call Us</label>
                            </div>
                            <div class="input-group">
                                <input type="text" value="sales@rellskitchen.com" readonly>
                                <label>Email Support</label>
                            </div>
                        </div>
                        
                        <div style="margin-top: 30px;">
                            <button id="retry-payment" class="submit-btn" style="margin-right: 10px;">
                                Try Payment Again
                            </button>
                            <a href="/" class="submit-btn" style="background: rgba(0, 245, 255, 0.1); border: 1px solid var(--neon-cyan);">
                                Continue Shopping
                            </a>
                        </div>
                        
                        <div style="margin-top: 20px;">
                            <a href="tel:(501)760-9490" class="submit-btn" style="background: rgba(0, 245, 255, 0.1); border: 1px solid var(--neon-cyan); margin-right: 10px;">
                                üìû Call Us
                            </a>
                            <a href="mailto:sales@rellskitchen.com" class="submit-btn" style="background: rgba(0, 245, 255, 0.1); border: 1px solid var(--neon-cyan);">
                                ‚úâÔ∏è Email Us
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <footer class="footer">
        <div class="container">
            <div class="footer-content">
                <div class="footer-brand">
                    <h3>RELL'S KITCHEN</h3>
                    <p>Neo-Caribbean Fusion ‚Ä¢ Est. 2157</p>
                </div>
                <div class="footer-links">
                    <div class="link-group">
                        <h4>Contact</h4>
                        <div class="about-description">üïí Mon-Fri: 10AM-3PM CST<br>üìû (501) 760-9490<br>‚úâÔ∏è sales@rellskitchen.com</div>
                    </div>
                </div>
            </div>
            <div class="footer-bottom">
                <p>&copy; 2157 Rell's Kitchen. All rights reserved. | Powered by Kaiel‚Ñ¢</p>
            </div>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            console.log('Payment cancelled page loaded');
            
            // Clear any stored order data since payment was cancelled
            sessionStorage.removeItem('pendingPayPalOrder');
            
            // Handle retry payment button
            const retryButton = document.getElementById('retry-payment');
            if (retryButton) {
                retryButton.addEventListener('click', () => {
                    // Try to get the original product info from URL params or sessionStorage
                    const urlParams = new URLSearchParams(window.location.search);
                    const token = urlParams.get('token');
                    
                    // If we have stored order data, redirect back to payment page with product info
                    const lastOrderData = sessionStorage.getItem('lastOrderAttempt');
                    if (lastOrderData) {
                        try {
                            const orderInfo = JSON.parse(lastOrderData);
                            window.location.href = `/payment?product=${orderInfo.productId}`;
                            return;
                        } catch (e) {
                            console.log('Could not parse last order data');
                        }
                    }
                    
                    // Fallback: redirect to main menu
                    window.location.href = '/';
                });
            }
        });
    </script>
</body>
</html>